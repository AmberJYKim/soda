<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="oneday">

<select id="selectReservationList" resultType="reservation">
	select
		*
	from
		tb_reservation 
	<where>
		<if test="memberId != null AND memberId = ''">
		member_id = #{memberId}
		</if>
	</where>
	order by 
		reservation_no desc
</select>

<select id="selectOnedayReviewList" resultType="onedayReview">
	select
		*
	from
		tb_oneday_review 
	order by 
		review_no desc
</select>
<insert id="insertOneday">
	insert into 
	tb_onedayclass 
		values (
				seq_oneday_class.nextval,
				#{memberId},
				#{onedayName},
				#{onedayPrice},
				#{onedayContent},
				#{latitude},
				#{longitude},
				#{detailedAddr},
				#{onedayTime},
				#{onedayMaxper},
				#{onedayMinper},
				#{onedayImg},
				<!-- gson 배열로 받음 -->
				#{menuList}
			)
			<selectKey keyProperty="onedayclassNo" resultType="_int" order="AFTER">
				select seq_oneday_class.currval from dual
			</selectKey>			
</insert>

<insert id="insertTime">
	insert into
		tb_onedayclasstime
			values(
				seq_oneday_time.nextval,
				#{onedayNoo},
				#{onedayTimeDate}
			)
</insert>

<select id="selectDateList"  resultType="Oneday">

	select * from TB_onedayclass
</select>


<select id="selectTimeList" resultType="OnedayTime">
	select*from tb_onedayclasstime
</select>



</mapper>
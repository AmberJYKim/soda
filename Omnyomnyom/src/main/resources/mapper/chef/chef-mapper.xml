<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="chef">

<update id="chefRequestUpdate">
	update 
		tb_chef_req
	set
		chef_req_ok	= #{variable}
	where
		member_id = #{chefId}
</update>
<resultMap type="chef" id="chefMap" >
<result column="member_id" property="chefId"/>
<result column="member_nick" property="chefNickName"/>
</resultMap>

<select id="selectChefAllList" resultMap="chefMap">
	select 
		*
	from
   		tb_member M  join tb_chef C
      using (member_id)
	order by
		c.regdate
</select>

<select id="selectChefRequestList" resultMap="chefReqMap">
	select
		*
	from
		tb_chef_req c
		join tb_member m using(member_id)
	order by
		c.regdate
</select>

<resultMap type="chefRequest" id="chefReqMap" >
	<result column="member_id" property="chefId"/>
	<result column="member_nick" property="chefNickName"/>
</resultMap>

<select id="selectChefRequest" resultType="chefRequest">
	select
		*
	from
		TB_chef_req
	where
		member_id = #{memberId}
</select>

<select id="selectChefRequestListCnt" resultType="string">
	select
		count(*)
	from 
		tb_chef_req
</select>

<insert id="chefRequest">
	insert into 
	 	TB_chef_req
	 values(
	 #{chefId},
	 #{chefProfile},
	 #{sns},
	 #{chefContent},
	 #{chefApVideo},
	 #{menuPrCategory},
	 #{businessInfo},
	 default,
	 default
	 ) 
</insert>
<resultMap type="chefRequest" id="chefReqMap">
	<result column = "chef_sns" property="sns" typeHandler="strArrTypeHandler"/>
</resultMap>

</mapper>